<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë‚¨ê²½ ê²€ìˆ˜ì‹œìŠ¤í…œ Â· ëª¨ë°”ì¼Â·PC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { background: #eef1f5; }
  </style>
</head>

<body class="flex justify-center">

  <!-- NAV -->
  <script src="nav.js"></script>

  <!-- ëª¨ë°”ì¼Â·PC ê³µìš© í”„ë ˆì„ -->
  <div class="w-full max-w-[1000px] min-h-screen bg-[#f8fafc] flex flex-col text-slate-900">

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="w-full px-4 md:px-8 lg:px-10 pt-20 pb-10 overflow-y-auto mx-auto">

      <!-- ìƒë‹¨ ìš”ì•½ -->
      <section class="mb-4">
        <div class="text-xs text-slate-500 mb-1">ì˜¤ëŠ˜</div>

        <div class="flex items-baseline justify-between">
          <div>
            <div class="text-lg md:text-xl font-semibold tracking-tight">ì¶œê³ Â·ì…ê³  ì‘ì—… í˜„í™©</div>
            <div class="text-[11px] md:text-sm text-slate-400 mt-0.5">
              ë‚¨ê²½ Â· ì‹¤ì‹œê°„ ê²€ìˆ˜
            </div>
          </div>

          <span class="px-2 py-0.5 rounded-full bg-sky-50 text-sky-600 text-[11px] border border-sky-100">
            ëŒ€ì‹œë³´ë“œ
          </span>
        </div>
      </section>

      <!-- ìš”ì•½ ì¹´ë“œ -->
      <section class="grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 mb-5">

        <!-- ì˜¤ëŠ˜ ì¶œê³  -->
        <a onclick="openTodayDetail()" 
           class="cursor-pointer bg-white rounded-2xl border border-slate-100 shadow-sm px-4 py-3 hover:shadow-md transition">

          <div class="flex items-center justify-between mb-1.5">
            <span class="text-[11px] md:text-xs text-slate-500">ì˜¤ëŠ˜ ì¶œê³ </span>
            <svg class="w-4 h-4 md:w-5 md:h-5 text-sky-500" fill="none" stroke="currentColor" stroke-width="1.6"
                 viewBox="0 0 24 24">
              <path d="M3 7.5L12 3l9 4.5-9 4.5L3 7.5Z" />
              <path d="M3 7.5V16.5L12 21l9-4.5V7.5" />
            </svg>
          </div>

          <div class="flex items-baseline gap-1">
            <span id="today_container" class="text-xl md:text-2xl font-bold">0</span>
            <span class="text-[11px] md:text-xs text-slate-400">ì»¨í…Œì´ë„ˆ</span>
          </div>

          <div class="text-[11px] md:text-xs text-slate-400 mt-1">
            LCL <span id="today_lcl" class="text-rose-500 font-semibold">0 ëŒ€</span>
          </div>
        </a>

        <!-- ë‚´ì¼ ì¶œê³  -->
        <a onclick="openTomorrowDetail()" 
           class="cursor-pointer bg-white rounded-2xl border border-slate-100 shadow-sm px-4 py-3 hover:shadow-md transition">

          <div class="flex items-center justify-between mb-1.5">
            <span class="text-[11px] md:text-xs text-slate-500">ë‚´ì¼ ì¶œê³ </span>
            <svg class="w-4 h-4 md:w-5 md:h-5 text-sky-500" fill="none" stroke="currentColor" stroke-width="1.6"
                 viewBox="0 0 24 24">
              <circle cx="7" cy="18" r="2" />
              <circle cx="17" cy="18" r="2" />
              <path d="M3 6h10v9H3V6Z" />
              <path d="M13 9h4l3 3v3h-3.5" />
            </svg>
          </div>

          <div class="flex items-baseline gap-1">
            <span id="tomorrow_container" class="text-xl md:text-2xl font-bold">0</span>
            <span class="text-[11px] md:text-xs text-slate-400">ì»¨í…Œì´ë„ˆ</span>
          </div>

          <div class="text-[11px] md:text-xs text-slate-400 mt-1">
            LCL <span id="tomorrow_lcl" class="text-sky-600 font-semibold">0 ëŒ€</span>
          </div>
        </a>

        <!-- ê²°í’ˆ / ê²€ìˆ˜ ì´ìŠˆ -->
<a href="detail_defect.html"
   class="cursor-pointer col-span-2 md:col-span-1 bg-white rounded-2xl border border-slate-100 shadow-sm px-4 py-3 flex justify-between items-center hover:shadow-md transition">

  <div>
    <div class="text-[11px] md:text-xs text-slate-500 mb-1">ê²°í’ˆ / ê²€ìˆ˜ ì´ìŠˆ</div>

    <div class="flex items-baseline gap-2">
      <span id="defect_count" class="text-xl md:text-2xl font-bold text-rose-600">0</span>
      <span class="text-[11px] md:text-xs text-slate-400">ê±´</span>
    </div>

    <div class="text-[11px] md:text-xs text-slate-400 mt-1">
      ë¬¸ì œê±´ <span id="defect_issue_count" class="text-rose-500 font-semibold">0ê±´</span>
    </div>
  </div>

  <div class="w-9 h-9 md:w-10 md:h-10 rounded-full bg-rose-50 flex items-center justify-center">
    <svg class="w-4 h-4 md:w-5 md:h-5 text-rose-500" fill="none" stroke="currentColor" stroke-width="1.6"
         viewBox="0 0 24 24">
      <path d="M12 3 2 19h20L12 3Z" />
      <path d="M12 9v4" />
      <circle cx="12" cy="16.5" r="0.7" />
    </svg>
  </div>

</a>


      </section>

      <!-- ìƒì°¨ê²€ìˆ˜ ì‹œì‘ -->
      <section class="mb-6">
        <a href="scan.html"
           class="w-full bg-sky-500 text-white rounded-2xl px-4 py-3 shadow-md flex items-center justify-between active:scale-[0.99] transition hover:bg-sky-600">
          <div class="text-left">
            <div class="text-xs md:text-sm text-sky-50/90">ìŠ¤ìº”ì‘ì—…</div>
            <div class="text-sm md:text-lg font-semibold">ìƒì°¨ê²€ìˆ˜ ì‹œì‘í•˜ê¸°</div>
            <div class="text-[11px] md:text-xs text-sky-50/80 mt-0.5">
              ì¸ë³´ì´ìŠ¤ ê²€ìƒ‰: <span class="font-semibold">BOX ë°•ìŠ¤ë²ˆí˜¸ ìŠ¤ìº”</span>
            </div>
          </div>

          <svg class="w-5 h-5 md:w-6 md:h-6 text-sky-50" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24">
            <path d="M8 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </section>

      <!-- ë©”ë‰´ 6ê°œ -->
      <section class="mb-6">
        <div class="bg-white rounded-2xl border border-slate-100 shadow-sm divide-y md:divide-y-0 md:divide-x md:grid md:grid-cols-2">

          <!-- ë©”ë‰´ ë°˜ë³µ -->
          <a href="IN.html" class="px-4 py-3 flex justify-between items-center hover:bg-slate-50 transition">
            <div>
              <span class="text-xs md:text-sm font-semibold text-slate-800">ì…ê³ ê²€ìˆ˜ Â·</span>
              <div class="text-[11px] md:text-xs text-slate-400">ìŠ¤ìº” + BOX ê²€ìˆ˜</div>
            </div>
            <span class="px-2 py-0.5 rounded-full border border-emerald-200 text-emerald-600 text-[10px] md:text-xs">ì§„í–‰ ì¤‘</span>
          </a>

          <a href="OUT.html" class="px-4 py-3 flex justify-between items-center hover:bg-slate-50 transition">
            <div>
              <span class="text-xs md:text-sm font-semibold text-slate-800">ì¶œê³ ê²€ìˆ˜ Â·</span>
              <div class="text-[11px] md:text-xs text-slate-400">ìŠ¤ìº” + BOX ê²€ìˆ˜</div>
            </div>
            <span class="px-2 py-0.5 rounded-full border border-emerald-200 text-emerald-600 text-[10px] md:text-xs">ì§„í–‰ ì¤‘</span>
            </span>
          </a>

          <a href="index_defect.html" class="px-4 py-3 flex justify-between items-center hover:bg-slate-50 transition">
            <div>
              <span class="text-xs md:text-sm font-semibold text-slate-800">ê²°í’ˆì¡°íšŒ Â·</span>
              <div class="text-[11px] md:text-xs text-slate-400">INVOICE NO Â· Sap & Wms</div>
            </div>
            <span class="px-2 py-0.5 rounded-full border border-emerald-200 text-emerald-600 text-[10px] md:text-xs">ì§„í–‰ ì¤‘</span>
          </a>

          <a href="index_stock.html"
             class="px-4 py-3 flex justify-between items-center hover:bg-slate-50 transition">
            <div>
              <span class="text-xs md:text-sm font-semibold text-slate-800">ì¬ê³ ì¡°íšŒ Â·</span>
              <div class="text-[11px] md:text-xs text-slate-400">ì œí’ˆì½”ë“œ Â· ë°•ìŠ¤ë²ˆí˜¸</div>
            </div>
            <span class="px-2 py-0.5 rounded-full border border-emerald-200 text-emerald-600 text-[10px] md:text-xs">ì§„í–‰ ì¤‘</span>
          </a>

          <a href="index_shipping.html" class="px-4 py-3 flex justify-between items-center hover:bg-slate-50 transition">
            <div>
              <span class="text-xs md:text-sm font-semibold text-slate-800">ì¶œê³ ì •ë³´ Â·</span>
              <div class="text-[11px] md:text-xs text-slate-400">ë‚ ì§œ Â· ì¸ë³´ì´ìŠ¤ Â· ìœ í˜•</div>
            </div>
            <span class="px-2 py-0.5 rounded-full border border-emerald-200 text-emerald-600 text-[10px] md:text-xs">ì§„í–‰ ì¤‘</span>
          </a>

          <a href="comingsoon.html" class="px-4 py-3 flex justify-between items-center hover:bg-slate-50 transition">
            <div>
              <span class="text-xs md:text-sm font-semibold text-slate-800">ì°½ê³ ë³„ì¬ê³  Â·</span>
              <div class="text-[11px] md:text-xs text-slate-400">EX Â· BO Â· GA Â· SS</div>
            </div>
            <span class="px-2 py-0.5 rounded-full border border-rose-200 text-rose-600 text-[10px] md:text-xs">comingsoon</span>
          </a>
           
          <a href="index_shipping.html" class="px-4 py-3 flex justify-between items-center hover:bg-slate-50 transition">
            <div>
              <span class="text-xs md:text-sm font-semibold text-slate-800"> comingsoonÂ·</span>
              <div class="text-[11px] md:text-xs text-slate-400"> comingsoon </div>
            </div>
            <span class="px-2 py-0.5 rounded-full border border-rose-200 text-rose-600 text-[10px] md:text-xs">comingsoon</span>
          </a>


          <a href="comingsoon.html" class="px-4 py-3 flex justify-between items-center hover:bg-slate-50 transition">
            <div>
              <span class="text-xs md:text-sm font-semibold text-slate-800">DashBoard Â·</span>
              <div class="text-[11px] md:text-xs text-slate-400">ì…ê³  Â· ì¶œê³  Â· ë³´ìˆ˜ Â· íŒŒì†</div>
            </div>
            <span class="px-2 py-0.5 rounded-full border border-rose-200 text-rose-600 text-[10px] md:text-xs">comingsoon</span>
          </a>



        </div>
      </section>



      
      <!-- ì•Œë¦¼ -->
      <section class="mb-10">
        <div class="flex items-center justify-between mb-1.5">
          <span class="text-xs md:text-sm font-semibold text-slate-600">ì•Œë¦¼</span>
        </div>

        <div class="bg-sky-50 border border-sky-100 text-[11px] md:text-xs text-sky-800 rounded-2xl px-3 py-2.5 flex items-start gap-2">
          <svg class="w-4 h-4 md:w-5 md:h-5 mt-0.5" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="9" />
            <path d="M12 10v6" stroke-linecap="round"/>
            <circle cx="12" cy="7.5" r="0.7" />
          </svg>

          <div>
            <div class="font-semibold mb-0.5">ë°”ì½”ë“œ ë¯¸ë“±ë¡ ê±´ ìë™ í‘œì‹œ</div>
            ì¶œê³ ê²€ìˆ˜ í™”ë©´ì—ì„œ ìŠ¤ìº” ì‹œ ë¯¸ë“±ë¡ ë°”ì½”ë“œëŠ”
            <span class="font-semibold">ìë™ìœ¼ë¡œ ë¹¨ê°„ìƒ‰</span>ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
          </div>
        </div>
      </section>

    </main>
  </div>

<!-- ========================================================== -->
<!-- ğŸ”¥ ì˜¤ëŠ˜Â·ë‚´ì¼ ì¶œê³  / ê²°í’ˆ/ê²€ìˆ˜ ì´ìŠˆ ìë™ ê³„ì‚° ìŠ¤í¬ë¦½íŠ¸ -->
<!-- ========================================================== -->

<script>
const URL_SHIPPING =
  "https://docs.google.com/spreadsheets/d/e/2PACX-1vRAWmUNAeyndXfdxHjR-1CakW_Tm3OzmMTng5RkB53umXwucqpxABqMMcB0y8H5cHNg7aoHYqFztz0F/pub?gid=1070360000&single=true&output=csv";

const URL_DEFECT =
  "https://docs.google.com/spreadsheets/d/e/2PACX-1vRAWmUNAeyndXfdxHjR-1CakW_Tm3OzmMTng5RkB53umXwucqpxABqMMcB0y8H5cHNg7aoHYqFztz0F/pub?gid=1308072172&single=true&output=csv";

async function loadCSV(url) {
  const res = await fetch(url);
  return (await res.text()).split("\n").map(r => r.split(","));
}

// í•œêµ­ ë‚ ì§œ
function getKRDate(offset = 0) {
  const now = new Date();
  const kr = new Date(now.getTime() + 9 * 3600000 + offset * 86400000);
  return kr.toISOString().slice(0, 10);
}

async function loadData() {
  const rows = await loadCSV(URL_SHIPPING);
  const today = getKRDate(0);
  const tomorrow = getKRDate(1);

  let todayExp = [], todayLCL = [];
  let tomorrowExp = [], tomorrowLCL = [];

  rows.forEach(r => {
    const date = r[2]?.trim();
    const type = r[7]?.trim();

    if (date === today) {
      if (type === "ìˆ˜ì¶œ ì‘ì—…ì˜ë¢°ì„œ") todayExp.push(r);
      if (type === "ë°°ì†¡ ì˜ë¢°ì„œ") todayLCL.push(r);
    }
    if (date === tomorrow) {
      if (type === "ìˆ˜ì¶œ ì‘ì—…ì˜ë¢°ì„œ") tomorrowExp.push(r);
      if (type === "ë°°ì†¡ ì˜ë¢°ì„œ") tomorrowLCL.push(r);
    }
  });

  document.getElementById("today_container").textContent = todayExp.length;
  document.getElementById("today_lcl").textContent = todayLCL.length;

  document.getElementById("tomorrow_container").textContent = tomorrowExp.length;
  document.getElementById("tomorrow_lcl").textContent = tomorrowLCL.length;

  // ìƒì„¸ í˜ì´ì§€ ë°ì´í„° ì €ì¥
  localStorage.setItem("todayExportData", JSON.stringify(todayExp));
  localStorage.setItem("tomorrowExportData", JSON.stringify(tomorrowExp));
}

// ê²°í’ˆ/ê²€ìˆ˜ ì´ìŠˆ
async function loadDefect() {
  const rows = await loadCSV(URL_DEFECT);
  const today = getKRDate(0);

  let count = 0;
  let issue = 0;

  rows.forEach(r => {
    const date = r[1]?.trim();    // Bì—´
    const status = r[4]?.trim();  // Eì—´ = ê²°í’ˆìƒíƒœ

    if (date !== today) return;

    if (status && status !== "ì…ê³ ì™„ë£Œ" && status !== "ì…ê³  ì™„ë£Œ") {
      count++;
      issue++;
    }
  });

  document.getElementById("defect_count").textContent = count;
  document.getElementById("defect_issue_count").textContent = issue;

  localStorage.setItem("defectIssueData", JSON.stringify(rows));
}

// í˜ì´ì§€ ì´ë™
function openTodayDetail() {
  location.href = "today_detail.html";
}
function openTomorrowDetail() {
  location.href = "tomorrow_detail.html";
}
function openDefectIssue() {
  location.href = "defect_issue.html";
}

loadData();
loadDefect();
</script>

</body>
</html>
